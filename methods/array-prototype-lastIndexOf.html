<script src="../simpletest.js"></script>

<script>

    // Function signature:
    // arr.LastIndexOf(searchElement[, fromIndex])


    // Parameters:
    // array
    // searchElement
    // fromIndex [optional]

    // Tests:

    // It should take an array.
    // It should take an elementToBeSearched as the second argument.
    // It should take an optionalFromIndex, as the third argument.

    // If optionalFromIndex < 0, initialValue = array.length - optionalFromIndex.
    // If initialValue < 0, return -1 (meaning the array will not be searched).
        
    // If no optionalFromIndex, default === array.length - 1.
    // If optionalFromIndex >= 0, initialValue = optionalFromIndex.

    // It should return the index of the first element in the array, that matches elementToBeSearched.
    // It should test the match using strict equality.

    function lastIndexOf(originalArray, elementToBeSearched, optionalFromIndex) {
        let arrayLength = originalArray.length;
        let initialIndex = arrayLength - 1;

        // If optionalFromIndex === true
        if(optionalFromIndex) {

            if(optionalFromIndex >= arrayLength) {
                initialIndex = initialIndex;
            }

            if(optionalFromIndex >= 0) {
                initialIndex = optionalFromIndex;
            }

            if(optionalFromIndex < 0) {
                initialIndex =  initialIndex + optionalFromIndex;

               if(initialIndex < 0) {
                   return - 1;
               }
            }
            
        }

        for( let i = initialIndex; i <= initialIndex; i--) {
                if(originalArray[i] === elementToBeSearched) {
                    return i;
            }
        }
    }

    tests({
        'It should take an array.': function () {
            let originalArray = [1, 2, 3];
            lastIndexOf(originalArray);
            eq(Array.isArray(originalArray), true);
        },
        'It should take an elementToBeSearched as the second argument.': function () {
            let originalArray = [1, 2, 3];
            let elementToBeSearched = 3;
            lastIndexOf(originalArray, elementToBeSearched);
            eq(elementToBeSearched === 3, true);
        },
        'It should take an optionalFromIndex, as the third argument.': function () {
            let originalArray = [1, 2, 3];
            let elementToBeSearched = 3;
            let optionalFromIndex = originalArray[1];
            lastIndexOf(originalArray, elementToBeSearched, optionalFromIndex);
            eq(optionalFromIndex === 2, true);
        },
        'If optionalFromIndex < 0, initialValue = array.length - optionalFromIndex.': function () {
            let originalArray = [1, 2, 3];
            let elementToBeSearched = 1;
            let optionalFromIndex = - 2;
            let elementIndexFound = lastIndexOf(originalArray, elementToBeSearched, optionalFromIndex);
            eq(elementIndexFound, 0);
        },
        'It should return the index of the first element in the array, that matches elementToBeSearched.': function () {
            let originalArray = [1, 1, 2, 2, 3];
            let elementToBeSearched = 2;
            let optionalFromIndex = 0;
            let elementIndexFound = lastIndexOf(originalArray, elementToBeSearched, optionalFromIndex);
            eq(elementIndexFound, 3);
        },
        'If no optionalFromIndex, default === array.length - 1.': function () {
            let originalArray = [1, 2, 3];
            let elementToBeSearched = 1;
            let elementIndexFound = lastIndexOf(originalArray, elementToBeSearched);
            eq(elementIndexFound, 0);
        },
        'If optionalFromIndex >= 0, initialValue = optionalFromIndex.': function () {
            let originalArray = [1, 1, 2, 2, 3];
            let elementToBeSearched = 2;
            let optionalFromIndex = 2;
            let elementIndexFound = lastIndexOf(originalArray, elementToBeSearched, optionalFromIndex);
            eq(elementIndexFound, 2);
        }
    });

</script>